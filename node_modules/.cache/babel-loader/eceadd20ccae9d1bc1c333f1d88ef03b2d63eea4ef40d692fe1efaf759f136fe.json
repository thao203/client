{"ast":null,"code":"import{useState,useEffect}from'react';import classNames from'classnames/bind';import styles from'./ChangePassword.module.scss';import Header from'../../HomePage/Layouts/Header/Header';import MenuLeft from'../../HomePage/Layouts/MenuLeft/MenuLeft';import Footer from'../../HomePage/Layouts/Footer/Footer';import request from'../../../config/Connect';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const cx=classNames.bind(styles);export const requestChangePassword=async _ref=>{let{oldPass,newPass,confirmNewPass}=_ref;const res=await request.put('/api/changePassword',{oldPass,newPass,confirmNewPass});return res.data;};function ChangePassword(){const[oldPassword,setOldPassword]=useState('');const[newPassword,setNewPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');useEffect(()=>{document.title=\"Đổi mật khẩu\";},[]);const handleSubmit=async e=>{e.preventDefault();try{const response=await requestChangePassword({oldPass:oldPassword,newPass:newPassword,confirmNewPass:confirmPassword});toast.success(response.message);setOldPassword('');setNewPassword('');setConfirmPassword('');}catch(err){var _err$response,_err$response$data;// Xử lý lỗi chi tiết dựa trên mã trạng thái từ backend\nconst errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Đã xảy ra lỗi khi đổi mật khẩu!';toast.error(errorMessage);}};return/*#__PURE__*/_jsxs(\"div\",{className:cx('wrapper'),children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(\"header\",{className:cx('header'),children:/*#__PURE__*/_jsx(Header,{})}),/*#__PURE__*/_jsxs(\"div\",{className:cx('main-container'),children:[/*#__PURE__*/_jsx(\"aside\",{className:cx('menu-left'),children:/*#__PURE__*/_jsx(MenuLeft,{})}),/*#__PURE__*/_jsxs(\"main\",{className:cx('content'),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Thay \\u0110\\u1ED5i M\\u1EADt Kh\\u1EA9u\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:cx('input-group'),children:[/*#__PURE__*/_jsx(\"label\",{children:\"M\\u1EADt kh\\u1EA9u c\\u0169\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:oldPassword,onChange:e=>setOldPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:cx('input-group'),children:[/*#__PURE__*/_jsx(\"label\",{children:\"M\\u1EADt kh\\u1EA9u m\\u1EDBi\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:newPassword,onChange:e=>setNewPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:cx('input-group'),children:[/*#__PURE__*/_jsx(\"label\",{children:\"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:cx('btn-submit'),children:\"X\\xE1c nh\\u1EADn\"})]})]})]}),/*#__PURE__*/_jsx(\"footer\",{className:cx('footer'),children:/*#__PURE__*/_jsx(Footer,{})})]});}export default ChangePassword;","map":{"version":3,"names":["useState","useEffect","classNames","styles","Header","MenuLeft","Footer","request","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","cx","bind","requestChangePassword","_ref","oldPass","newPass","confirmNewPass","res","put","data","ChangePassword","oldPassword","setOldPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","document","title","handleSubmit","e","preventDefault","response","success","message","err","_err$response","_err$response$data","errorMessage","error","className","children","onSubmit","type","value","onChange","target","required"],"sources":["E:/Documents/Hoc_Tap/LATN/client/src/Page/User/Changepassword/changepassword.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport classNames from 'classnames/bind';\r\nimport styles from './ChangePassword.module.scss';\r\nimport Header from '../../HomePage/Layouts/Header/Header';\r\nimport MenuLeft from '../../HomePage/Layouts/MenuLeft/MenuLeft';\r\nimport Footer from '../../HomePage/Layouts/Footer/Footer';\r\nimport request from '../../../config/Connect';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nexport const requestChangePassword = async ({ oldPass, newPass, confirmNewPass }) => {\r\n    const res = await request.put('/api/changePassword', { oldPass, newPass, confirmNewPass });\r\n    return res.data;\r\n};\r\n\r\nfunction ChangePassword() {\r\n    const [oldPassword, setOldPassword] = useState('');\r\n    const [newPassword, setNewPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n\r\n    useEffect(() => {\r\n        document.title = \"Đổi mật khẩu\";\r\n    }, []);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const response = await requestChangePassword({\r\n                oldPass: oldPassword,\r\n                newPass: newPassword,\r\n                confirmNewPass: confirmPassword\r\n            });\r\n            toast.success(response.message);\r\n            setOldPassword('');\r\n            setNewPassword('');\r\n            setConfirmPassword('');\r\n        } catch (err) {\r\n            // Xử lý lỗi chi tiết dựa trên mã trạng thái từ backend\r\n            const errorMessage = err.response?.data?.message || 'Đã xảy ra lỗi khi đổi mật khẩu!';\r\n            toast.error(errorMessage);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={cx('wrapper')}>\r\n            <ToastContainer />\r\n            <header className={cx('header')}>\r\n                <Header />\r\n            </header>\r\n            <div className={cx('main-container')}>\r\n                <aside className={cx('menu-left')}>\r\n                    <MenuLeft />\r\n                </aside>\r\n                <main className={cx('content')}>\r\n                    <h2>Thay Đổi Mật Khẩu</h2>\r\n                    <form onSubmit={handleSubmit}>\r\n                        <div className={cx('input-group')}>\r\n                            <label>Mật khẩu cũ</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                value={oldPassword}\r\n                                onChange={(e) => setOldPassword(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className={cx('input-group')}>\r\n                            <label>Mật khẩu mới</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                value={newPassword}\r\n                                onChange={(e) => setNewPassword(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className={cx('input-group')}>\r\n                            <label>Xác nhận mật khẩu</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                value={confirmPassword}\r\n                                onChange={(e) => setConfirmPassword(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <button type=\"submit\" className={cx('btn-submit')}>Xác nhận</button>\r\n                    </form>\r\n                </main>\r\n            </div>\r\n            <footer className={cx('footer')}>\r\n                <Footer />\r\n            </footer>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ChangePassword;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}