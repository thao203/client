{"ast":null,"code":"import classNames from'classnames/bind';import styles from'../ManagementUser/ManagementUser.module.scss';import request from'../../../../config/Connect';import{useEffect,useState}from'react';import ModalEditLocation from'../../../../Modal/Location/ModalEditLocation';import ModalDeleteLocation from'../../../../Modal/Location/ModaDeleteLocation';import ModalAddLocation from'../../../../Modal/Location/ModalAddLocation';import{toast,ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import'bootstrap/dist/css/bootstrap.min.css';import'bootstrap-icons/font/bootstrap-icons.css';import{Button,Box,Modal,Typography}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const cx=classNames.bind(styles);function ManagementLocation(){const[dataLocation,setDataLocation]=useState([]);const[showModalAddLocation,setShowModalAddLocation]=useState(false);const[showModalEditLocation,setShowModalEditLocation]=useState(false);const[showModalDeleteLocation,setShowModalDeleteLocation]=useState(false);const[showModalQR,setShowModalQR]=useState(false);const[qrData,setQrData]=useState([]);const[valueSearch,setValueSearch]=useState('');const[selectedLocation,setSelectedLocation]=useState(null);const[selectedMavitri,setSelectedMavitri]=useState('');const[shouldRefresh,setShouldRefresh]=useState(false);const[bookDetails,setBookDetails]=useState(null);const[showDetailModal,setShowDetailModal]=useState(false);const[loadingBook,setLoadingBook]=useState(false);const[bookError,setBookError]=useState(null);const[currentPage,setCurrentPage]=useState(1);const[itemsPerPage]=useState(10);const[selectedCoso,setSelectedCoso]=useState('');const[selectedSoke,setSelectedSoke]=useState('');const[cosoOptions,setCosoOptions]=useState([]);const[sokeOptions,setSokeOptions]=useState([]);const handleModalAddLocation=()=>{setShowModalAddLocation(!showModalAddLocation);};const handleModalEditLocation=location=>{setShowModalEditLocation(!showModalEditLocation);setSelectedLocation(location);};const handleModalDeleteLocation=mavitri=>{setShowModalDeleteLocation(!showModalDeleteLocation);setSelectedMavitri(mavitri);};const handleModalQR=async()=>{try{const res=await request.get('/api/generateQRCodePerShelf');setQrData(res.data.qrData||[]);setShowModalQR(true);}catch(error){toast.error('Lỗi khi lấy mã QR: '+error.message);}};const handleDeleteSuccess=()=>{setShouldRefresh(!shouldRefresh);};const handleEditSuccess=()=>{setShouldRefresh(!shouldRefresh);};const handleAddSuccess=()=>{setShouldRefresh(!shouldRefresh);};const handleShowDetail=async mavitri=>{try{setLoadingBook(true);setBookError(null);const res=await request.get(`/api/getBooksByLocation?mavitri=${mavitri}`);const books=res.data.data||[];if(books.length>0){// Fetch full book details using masach of the first book\nconst bookRes=await request.get('/api/SearchBookByMaSach',{params:{masach:books[0].masach}});setBookDetails(bookRes.data);}else{setBookDetails(null);}setShowDetailModal(true);}catch(error){var _error$response,_error$response$data;setBookError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Lỗi khi lấy chi tiết sách');setBookDetails(null);setShowDetailModal(true);}finally{setLoadingBook(false);}};const handleSaveAllQRCodes=()=>{qrData.forEach((qr,index)=>{const link=document.createElement('a');link.href=qr.qrCodeBase64;link.download=`QR_${qr.coso}_${qr.soke}.png`;document.body.appendChild(link);link.click();document.body.removeChild(link);});toast.success('Đã tải xuống tất cả mã QR!');};const handleKeyDown=e=>{if(e.key==='Enter'){e.preventDefault();}};useEffect(()=>{request.get('/api/getAllLocations').then(res=>{const locations=res.data.data||[];setDataLocation(locations);const uniqueCoso=[...new Set(locations.map(item=>String(item.coso)))].sort();const uniqueSoke=[...new Set(locations.map(item=>String(item.soke)))].sort();setCosoOptions(uniqueCoso);setSokeOptions(uniqueSoke);}).catch(error=>console.error(error));},[shouldRefresh]);const filteredLocations=dataLocation.filter(location=>{const matchesSearch=location.mavitri.toLowerCase().includes(valueSearch.toLowerCase());const matchesCoso=selectedCoso?String(location.coso)===selectedCoso:true;const matchesSoke=selectedSoke?String(location.soke)===selectedSoke:true;return matchesSearch&&matchesCoso&&matchesSoke;});const formatDate=dateString=>{if(!dateString)return'N/A';const date=new Date(dateString);const day=String(date.getDate()).padStart(2,'0');const month=String(date.getMonth()+1).padStart(2,'0');const year=date.getFullYear();return`${day}/${month}/${year}`;};const indexOfLastItem=currentPage*itemsPerPage;const indexOfFirstItem=indexOfLastItem-itemsPerPage;const currentItems=filteredLocations.slice(indexOfFirstItem,indexOfLastItem);const totalPages=Math.ceil(filteredLocations.length/itemsPerPage);const handlePageChange=pageNumber=>{setCurrentPage(pageNumber);};return/*#__PURE__*/_jsxs(\"div\",{className:cx('wrapper'),children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container my-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-center justify-content-between g-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-3 text-center text-md-start\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"mb-0 fw-bold\",children:\"Qu\\u1EA3n L\\xFD V\\u1ECB Tr\\xED\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-2 align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:selectedCoso,onChange:e=>setSelectedCoso(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"T\\u1EA5t c\\u1EA3 c\\u01A1 s\\u1EDF\"}),cosoOptions.map(coso=>/*#__PURE__*/_jsx(\"option\",{value:coso,children:coso},coso))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:selectedSoke,onChange:e=>setSelectedSoke(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"T\\u1EA5t c\\u1EA3 s\\u1ED1 k\\u1EC7\"}),sokeOptions.map(soke=>/*#__PURE__*/_jsx(\"option\",{value:soke,children:soke},soke))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(\"form\",{className:\"d-flex\",onSubmit:e=>e.preventDefault(),children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"search\",placeholder:\"T\\xECm ki\\u1EBFm m\\xE3 v\\u1ECB tr\\xED\",\"aria-label\":\"Search\",value:valueSearch,onChange:e=>setValueSearch(e.target.value),onKeyDown:handleKeyDown})})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-3 text-center text-md-end d-flex justify-content-end gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleModalAddLocation,className:\"btn btn-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus-lg me-2\"}),\"Th\\xEAm V\\u1ECB Tr\\xED\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleModalQR,className:\"btn btn-success\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-qr-code me-2\"}),\"QR\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-hover table-bordered align-middle\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"M\\xE3 V\\u1ECB Tr\\xED\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"C\\u01A1 S\\u1EDF\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"S\\u1ED1 K\\u1EC7\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"H\\xE0nh \\u0110\\u1ED9ng\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:currentItems.length>0?currentItems.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:item.mavitri}),/*#__PURE__*/_jsx(\"td\",{children:item.coso}),/*#__PURE__*/_jsx(\"td\",{children:item.soke}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2 justify-content-center\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleShowDetail(item.mavitri),className:\"btn btn-info btn-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-eye me-1\"}),\" Chi ti\\u1EBFt\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleModalEditLocation(item),className:\"btn btn-warning btn-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-pencil me-1\"}),\" S\\u1EEDa\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleModalDeleteLocation(item.mavitri),className:\"btn btn-danger btn-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-trash me-1\"}),\" X\\xF3a\"]})]})})]},item._id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"text-center\",children:\"Kh\\xF4ng c\\xF3 v\\u1ECB tr\\xED n\\xE0o\"})})})]})}),filteredLocations.length>0&&/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Page navigation\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"pagination justify-content-center mt-3\",children:[/*#__PURE__*/_jsx(\"li\",{className:`page-item ${currentPage===1?'disabled':''}`,children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:()=>handlePageChange(currentPage-1),disabled:currentPage===1,children:\"Tr\\u01B0\\u1EDBc\"})}),Array.from({length:totalPages},(_,i)=>i+1).map(page=>/*#__PURE__*/_jsx(\"li\",{className:`page-item ${currentPage===page?'active':''}`,children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:()=>handlePageChange(page),children:page})},page)),/*#__PURE__*/_jsx(\"li\",{className:`page-item ${currentPage===totalPages?'disabled':''}`,children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:()=>handlePageChange(currentPage+1),disabled:currentPage===totalPages,children:\"Sau\"})})]})})]}),/*#__PURE__*/_jsx(Modal,{open:showDetailModal,onClose:()=>setShowDetailModal(false),\"aria-labelledby\":\"book-detail-modal\",\"aria-describedby\":\"book-detail-description\",sx:{display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(Box,{sx:{maxWidth:800,width:'100%',bgcolor:'background.paper',borderRadius:2,overflow:'auto',maxHeight:'90vh'},children:loadingBook?/*#__PURE__*/_jsxs(Typography,{className:\"text-center text-muted py-5\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-hourglass-split me-2\"}),\"\\u0110ang t\\u1EA3i...\"]}):bookError?/*#__PURE__*/_jsxs(Typography,{className:\"text-danger text-center py-5\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-triangle me-2\"}),bookError]}):!bookDetails?/*#__PURE__*/_jsxs(Typography,{className:\"text-center text-muted py-5\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-book me-2\"}),\"Kh\\xF4ng t\\xECm th\\u1EA5y s\\xE1ch.\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow-lg border-0 rounded-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row g-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 p-4\",children:/*#__PURE__*/_jsx(\"img\",{src:bookDetails.img,alt:bookDetails.tensach,className:\"img-fluid rounded shadow-sm\",style:{maxHeight:'400px',objectFit:'cover'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8 p-4\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"fw-bold mb-4 text-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-book me-2\"}),bookDetails.tensach]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-unstyled\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-upc-scan me-2\"}),\"M\\xE3 s\\xE1ch:\"]}),' ',/*#__PURE__*/_jsx(\"span\",{children:bookDetails.masach})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person-fill me-2\"}),\"T\\xE1c gi\\u1EA3:\"]}),' ',/*#__PURE__*/_jsx(\"span\",{children:bookDetails.tacgia})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-building me-2\"}),\"Nh\\xE0 xu\\u1EA5t b\\u1EA3n:\"]}),' ',/*#__PURE__*/_jsx(\"span\",{children:bookDetails.nhaxuatban})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-tags-fill me-2\"}),\"Phi\\xEAn b\\u1EA3n:\"]}),' ',/*#__PURE__*/_jsx(\"span\",{children:bookDetails.phienban||'N/A'})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-unstyled\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-file-earmark-text me-2\"}),\"S\\u1ED1 trang:\"]}),' ',/*#__PURE__*/_jsx(\"span\",{children:bookDetails.pages||'N/A'})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-currency-dollar me-2\"}),\"Gi\\xE1:\"]}),' ',/*#__PURE__*/_jsx(\"span\",{children:bookDetails.price?bookDetails.price.toLocaleString()+' VND':'N/A'})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-clock-history me-2\"}),\"Ng\\xE0y c\\u1EADp nh\\u1EADt:\"]}),' ',/*#__PURE__*/_jsx(\"span\",{children:formatDate(bookDetails.ngaycapnhat)})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-bookmark-fill me-2\"}),\"Danh m\\u1EE5c:\"]}),' ',/*#__PURE__*/_jsx(\"span\",{children:bookDetails.tendanhmuc||'N/A'})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-calendar-event me-2\"}),\"N\\u0103m xu\\u1EA5t b\\u1EA3n:\"]}),' ',/*#__PURE__*/_jsx(\"span\",{children:bookDetails.namxb})]})]})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body border-top mt-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"fw-semibold text-muted\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-card-text me-2\"}),\"M\\xF4 t\\u1EA3 s\\xE1ch\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:bookDetails.mota||'Không có mô tả'})]}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'flex-end',p:2},children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>setShowDetailModal(false),sx:{borderColor:'#3498DB',color:'#3498DB','&:hover':{borderColor:'#2C3E50',color:'#2C3E50'},textTransform:'none'},children:\"\\u0110\\xF3ng\"})})]})})}),showModalQR&&/*#__PURE__*/_jsx(\"div\",{className:\"modal fade show d-block\",tabIndex:\"-1\",style:{backgroundColor:'rgba(0,0,0,0.5)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:\"M\\xE3 QR Theo K\\u1EC7\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:()=>setShowModalQR(false)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:qrData.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:qrData.map((qr,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-4 mb-4 text-center\",children:[/*#__PURE__*/_jsx(\"h6\",{children:`Cơ sở: ${qr.coso} - Kệ: ${qr.soke}`}),/*#__PURE__*/_jsx(\"img\",{src:qr.qrCodeBase64,alt:`QR for ${qr.coso}_${qr.soke}`,className:\"img-fluid\",style:{maxWidth:'200px'}})]},index))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"Kh\\xF4ng c\\xF3 m\\xE3 QR n\\xE0o \\u0111\\u1EC3 hi\\u1EC3n th\\u1ECB.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:handleSaveAllQRCodes,disabled:qrData.length===0,children:\"L\\u01B0u T\\u1EA5t C\\u1EA3\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>setShowModalQR(false),children:\"\\u0110\\xF3ng\"})]})]})})}),/*#__PURE__*/_jsx(ModalAddLocation,{showModalAddLocation:showModalAddLocation,setShowModalAddLocation:setShowModalAddLocation,onAddSuccess:handleAddSuccess}),/*#__PURE__*/_jsx(ModalEditLocation,{locationData:selectedLocation,showModalEditLocation:showModalEditLocation,setShowModalEditLocation:setShowModalEditLocation,onEditSuccess:handleEditSuccess}),/*#__PURE__*/_jsx(ModalDeleteLocation,{showModalDeleteLocation:showModalDeleteLocation,setShowModalDeleteLocation:setShowModalDeleteLocation,mavitri:selectedMavitri,onDeleteSuccess:handleDeleteSuccess})]});}export default ManagementLocation;","map":{"version":3,"names":["classNames","styles","request","useEffect","useState","ModalEditLocation","ModalDeleteLocation","ModalAddLocation","toast","ToastContainer","Button","Box","Modal","Typography","jsx","_jsx","jsxs","_jsxs","cx","bind","ManagementLocation","dataLocation","setDataLocation","showModalAddLocation","setShowModalAddLocation","showModalEditLocation","setShowModalEditLocation","showModalDeleteLocation","setShowModalDeleteLocation","showModalQR","setShowModalQR","qrData","setQrData","valueSearch","setValueSearch","selectedLocation","setSelectedLocation","selectedMavitri","setSelectedMavitri","shouldRefresh","setShouldRefresh","bookDetails","setBookDetails","showDetailModal","setShowDetailModal","loadingBook","setLoadingBook","bookError","setBookError","currentPage","setCurrentPage","itemsPerPage","selectedCoso","setSelectedCoso","selectedSoke","setSelectedSoke","cosoOptions","setCosoOptions","sokeOptions","setSokeOptions","handleModalAddLocation","handleModalEditLocation","location","handleModalDeleteLocation","mavitri","handleModalQR","res","get","data","error","message","handleDeleteSuccess","handleEditSuccess","handleAddSuccess","handleShowDetail","books","length","bookRes","params","masach","_error$response","_error$response$data","response","handleSaveAllQRCodes","forEach","qr","index","link","document","createElement","href","qrCodeBase64","download","coso","soke","body","appendChild","click","removeChild","success","handleKeyDown","e","key","preventDefault","then","locations","uniqueCoso","Set","map","item","String","sort","uniqueSoke","catch","console","filteredLocations","filter","matchesSearch","toLowerCase","includes","matchesCoso","matchesSoke","formatDate","dateString","date","Date","day","getDate","padStart","month","getMonth","year","getFullYear","indexOfLastItem","indexOfFirstItem","currentItems","slice","totalPages","Math","ceil","handlePageChange","pageNumber","className","children","value","onChange","target","onSubmit","type","placeholder","onKeyDown","onClick","scope","_id","colSpan","disabled","Array","from","_","i","page","open","onClose","sx","display","alignItems","justifyContent","maxWidth","width","bgcolor","borderRadius","overflow","maxHeight","src","img","alt","tensach","style","objectFit","tacgia","nhaxuatban","phienban","pages","price","toLocaleString","ngaycapnhat","tendanhmuc","namxb","mota","p","variant","borderColor","color","textTransform","tabIndex","backgroundColor","onAddSuccess","locationData","onEditSuccess","onDeleteSuccess"],"sources":["E:/Documents/Hoc_Tap/LATN/client/src/Page/Admin/Layouts/ManagementLocation/ManagementLocation.js"],"sourcesContent":["import classNames from 'classnames/bind';\r\nimport styles from '../ManagementUser/ManagementUser.module.scss';\r\nimport request from '../../../../config/Connect';\r\nimport { useEffect, useState } from 'react';\r\nimport ModalEditLocation from '../../../../Modal/Location/ModalEditLocation';\r\nimport ModalDeleteLocation from '../../../../Modal/Location/ModaDeleteLocation';\r\nimport ModalAddLocation from '../../../../Modal/Location/ModalAddLocation';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'bootstrap-icons/font/bootstrap-icons.css';\r\nimport { Button, Box, Modal, Typography } from '@mui/material';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction ManagementLocation() {\r\n    const [dataLocation, setDataLocation] = useState([]);\r\n    const [showModalAddLocation, setShowModalAddLocation] = useState(false);\r\n    const [showModalEditLocation, setShowModalEditLocation] = useState(false);\r\n    const [showModalDeleteLocation, setShowModalDeleteLocation] = useState(false);\r\n    const [showModalQR, setShowModalQR] = useState(false);\r\n    const [qrData, setQrData] = useState([]);\r\n    const [valueSearch, setValueSearch] = useState('');\r\n    const [selectedLocation, setSelectedLocation] = useState(null);\r\n    const [selectedMavitri, setSelectedMavitri] = useState('');\r\n    const [shouldRefresh, setShouldRefresh] = useState(false);\r\n    const [bookDetails, setBookDetails] = useState(null);\r\n    const [showDetailModal, setShowDetailModal] = useState(false);\r\n    const [loadingBook, setLoadingBook] = useState(false);\r\n    const [bookError, setBookError] = useState(null);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [itemsPerPage] = useState(10);\r\n    const [selectedCoso, setSelectedCoso] = useState('');\r\n    const [selectedSoke, setSelectedSoke] = useState('');\r\n    const [cosoOptions, setCosoOptions] = useState([]);\r\n    const [sokeOptions, setSokeOptions] = useState([]);\r\n\r\n    const handleModalAddLocation = () => {\r\n        setShowModalAddLocation(!showModalAddLocation);\r\n    };\r\n\r\n    const handleModalEditLocation = (location) => {\r\n        setShowModalEditLocation(!showModalEditLocation);\r\n        setSelectedLocation(location);\r\n    };\r\n\r\n    const handleModalDeleteLocation = (mavitri) => {\r\n        setShowModalDeleteLocation(!showModalDeleteLocation);\r\n        setSelectedMavitri(mavitri);\r\n    };\r\n\r\n    const handleModalQR = async () => {\r\n        try {\r\n            const res = await request.get('/api/generateQRCodePerShelf');\r\n            setQrData(res.data.qrData || []);\r\n            setShowModalQR(true);\r\n        } catch (error) {\r\n            toast.error('Lỗi khi lấy mã QR: ' + error.message);\r\n        }\r\n    };\r\n\r\n    const handleDeleteSuccess = () => {\r\n        setShouldRefresh(!shouldRefresh);\r\n    };\r\n\r\n    const handleEditSuccess = () => {\r\n        setShouldRefresh(!shouldRefresh);\r\n    };\r\n\r\n    const handleAddSuccess = () => {\r\n        setShouldRefresh(!shouldRefresh);\r\n    };\r\n\r\n    const handleShowDetail = async (mavitri) => {\r\n        try {\r\n            setLoadingBook(true);\r\n            setBookError(null);\r\n            const res = await request.get(`/api/getBooksByLocation?mavitri=${mavitri}`);\r\n            const books = res.data.data || [];\r\n            if (books.length > 0) {\r\n                // Fetch full book details using masach of the first book\r\n                const bookRes = await request.get('/api/SearchBookByMaSach', {\r\n                    params: { masach: books[0].masach },\r\n                });\r\n                setBookDetails(bookRes.data);\r\n            } else {\r\n                setBookDetails(null);\r\n            }\r\n            setShowDetailModal(true);\r\n        } catch (error) {\r\n            setBookError(error.response?.data?.message || 'Lỗi khi lấy chi tiết sách');\r\n            setBookDetails(null);\r\n            setShowDetailModal(true);\r\n        } finally {\r\n            setLoadingBook(false);\r\n        }\r\n    };\r\n\r\n    const handleSaveAllQRCodes = () => {\r\n        qrData.forEach((qr, index) => {\r\n            const link = document.createElement('a');\r\n            link.href = qr.qrCodeBase64;\r\n            link.download = `QR_${qr.coso}_${qr.soke}.png`;\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n        });\r\n        toast.success('Đã tải xuống tất cả mã QR!');\r\n    };\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        request\r\n            .get('/api/getAllLocations')\r\n            .then((res) => {\r\n                const locations = res.data.data || [];\r\n                setDataLocation(locations);\r\n                const uniqueCoso = [...new Set(locations.map(item => String(item.coso)))].sort();\r\n                const uniqueSoke = [...new Set(locations.map(item => String(item.soke)))].sort();\r\n                setCosoOptions(uniqueCoso);\r\n                setSokeOptions(uniqueSoke);\r\n            })\r\n            .catch((error) => console.error(error));\r\n    }, [shouldRefresh]);\r\n\r\n    const filteredLocations = dataLocation.filter((location) => {\r\n        const matchesSearch = location.mavitri.toLowerCase().includes(valueSearch.toLowerCase());\r\n        const matchesCoso = selectedCoso ? String(location.coso) === selectedCoso : true;\r\n        const matchesSoke = selectedSoke ? String(location.soke) === selectedSoke : true;\r\n        return matchesSearch && matchesCoso && matchesSoke;\r\n    });\r\n\r\n    const formatDate = (dateString) => {\r\n        if (!dateString) return 'N/A';\r\n        const date = new Date(dateString);\r\n        const day = String(date.getDate()).padStart(2, '0');\r\n        const month = String(date.getMonth() + 1).padStart(2, '0');\r\n        const year = date.getFullYear();\r\n        return `${day}/${month}/${year}`;\r\n    };\r\n\r\n    const indexOfLastItem = currentPage * itemsPerPage;\r\n    const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n    const currentItems = filteredLocations.slice(indexOfFirstItem, indexOfLastItem);\r\n    const totalPages = Math.ceil(filteredLocations.length / itemsPerPage);\r\n\r\n    const handlePageChange = (pageNumber) => {\r\n        setCurrentPage(pageNumber);\r\n    };\r\n\r\n    return (\r\n        <div className={cx('wrapper')}>\r\n            <ToastContainer />\r\n            <div className=\"container my-4\">\r\n                <div className=\"row align-items-center justify-content-between g-3\">\r\n                    <div className=\"col-12 col-md-3 text-center text-md-start\">\r\n                        <h4 className=\"mb-0 fw-bold\">Quản Lý Vị Trí</h4>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-6\">\r\n                        <div className=\"row g-2 align-items-center\">\r\n                            <div className=\"col-4\">\r\n                                <select\r\n                                    className=\"form-select\"\r\n                                    value={selectedCoso}\r\n                                    onChange={(e) => setSelectedCoso(e.target.value)}\r\n                                >\r\n                                    <option value=\"\">Tất cả cơ sở</option>\r\n                                    {cosoOptions.map((coso) => (\r\n                                        <option key={coso} value={coso}>\r\n                                            {coso}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"col-4\">\r\n                                <select\r\n                                    className=\"form-select\"\r\n                                    value={selectedSoke}\r\n                                    onChange={(e) => setSelectedSoke(e.target.value)}\r\n                                >\r\n                                    <option value=\"\">Tất cả số kệ</option>\r\n                                    {sokeOptions.map((soke) => (\r\n                                        <option key={soke} value={soke}>\r\n                                            {soke}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"col-4\">\r\n                                <form className=\"d-flex\" onSubmit={(e) => e.preventDefault()}>\r\n                                    <input\r\n                                        className=\"form-control\"\r\n                                        type=\"search\"\r\n                                        placeholder=\"Tìm kiếm mã vị trí\"\r\n                                        aria-label=\"Search\"\r\n                                        value={valueSearch}\r\n                                        onChange={(e) => setValueSearch(e.target.value)}\r\n                                        onKeyDown={handleKeyDown}\r\n                                    />\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-12 col-md-3 text-center text-md-end d-flex justify-content-end gap-2\">\r\n                        <button\r\n                            onClick={handleModalAddLocation}\r\n                            className=\"btn btn-primary\"\r\n                        >\r\n                            <i className=\"bi bi-plus-lg me-2\"></i>Thêm Vị Trí\r\n                        </button>\r\n                        <button\r\n                            onClick={handleModalQR}\r\n                            className=\"btn btn-success\"\r\n                        >\r\n                            <i className=\"bi bi-qr-code me-2\"></i>QR\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"container\">\r\n                <div className=\"table-responsive\">\r\n                    <table className=\"table table-striped table-hover table-bordered align-middle\">\r\n                        <thead className=\"table-dark\">\r\n                        <tr>\r\n                            <th scope=\"col\">Mã Vị Trí</th>\r\n                            <th scope=\"col\">Cơ Sở</th>\r\n                            <th scope=\"col\">Số Kệ</th>\r\n                            <th scope=\"col\">Hành Động</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {currentItems.length > 0 ? (\r\n                            currentItems.map((item) => (\r\n                                <tr key={item._id}>\r\n                                    <th scope=\"row\">{item.mavitri}</th>\r\n                                    <td>{item.coso}</td>\r\n                                    <td>{item.soke}</td>\r\n                                    <td>\r\n                                        <div className=\"d-flex gap-2 justify-content-center\">\r\n                                            <button\r\n                                                onClick={() => handleShowDetail(item.mavitri)}\r\n                                                className=\"btn btn-info btn-sm\"\r\n                                            >\r\n                                                <i className=\"bi bi-eye me-1\"></i> Chi tiết\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleModalEditLocation(item)}\r\n                                                className=\"btn btn-warning btn-sm\"\r\n                                            >\r\n                                                <i className=\"bi bi-pencil me-1\"></i> Sửa\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleModalDeleteLocation(item.mavitri)}\r\n                                                className=\"btn btn-danger btn-sm\"\r\n                                            >\r\n                                                <i className=\"bi bi-trash me-1\"></i> Xóa\r\n                                            </button>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            ))\r\n                        ) : (\r\n                            <tr>\r\n                                <td colSpan=\"4\" className=\"text-center\">Không có vị trí nào</td>\r\n                            </tr>\r\n                        )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                {filteredLocations.length > 0 && (\r\n                    <nav aria-label=\"Page navigation\">\r\n                        <ul className=\"pagination justify-content-center mt-3\">\r\n                            <li className={`page-item ${currentPage === 1 ? 'disabled' : ''}`}>\r\n                                <button\r\n                                    className=\"page-link\"\r\n                                    onClick={() => handlePageChange(currentPage - 1)}\r\n                                    disabled={currentPage === 1}\r\n                                >\r\n                                    Trước\r\n                                </button>\r\n                            </li>\r\n                            {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n                                <li\r\n                                    key={page}\r\n                                    className={`page-item ${currentPage === page ? 'active' : ''}`}\r\n                                >\r\n                                    <button\r\n                                        className=\"page-link\"\r\n                                        onClick={() => handlePageChange(page)}\r\n                                    >\r\n                                        {page}\r\n                                    </button>\r\n                                </li>\r\n                            ))}\r\n                            <li className={`page-item ${currentPage === totalPages ? 'disabled' : ''}`}>\r\n                                <button\r\n                                    className=\"page-link\"\r\n                                    onClick={() => handlePageChange(currentPage + 1)}\r\n                                    disabled={currentPage === totalPages}\r\n                                >\r\n                                    Sau\r\n                                </button>\r\n                            </li>\r\n                        </ul>\r\n                    </nav>\r\n                )}\r\n            </div>\r\n\r\n            <Modal\r\n                open={showDetailModal}\r\n                onClose={() => setShowDetailModal(false)}\r\n                aria-labelledby=\"book-detail-modal\"\r\n                aria-describedby=\"book-detail-description\"\r\n                sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}\r\n            >\r\n                <Box sx={{ maxWidth: 800, width: '100%', bgcolor: 'background.paper', borderRadius: 2, overflow: 'auto', maxHeight: '90vh' }}>\r\n                    {loadingBook ? (\r\n                        <Typography className=\"text-center text-muted py-5\">\r\n                            <i className=\"bi bi-hourglass-split me-2\"></i>Đang tải...\r\n                        </Typography>\r\n                    ) : bookError ? (\r\n                        <Typography className=\"text-danger text-center py-5\">\r\n                            <i className=\"bi bi-exclamation-triangle me-2\"></i>{bookError}\r\n                        </Typography>\r\n                    ) : !bookDetails ? (\r\n                        <Typography className=\"text-center text-muted py-5\">\r\n                            <i className=\"bi bi-book me-2\"></i>Không tìm thấy sách.\r\n                        </Typography>\r\n                    ) : (\r\n                        <div className=\"card shadow-lg border-0 rounded-3\">\r\n                            <div className=\"row g-0\">\r\n                                <div className=\"col-md-4 p-4\">\r\n                                    <img\r\n                                        src={bookDetails.img}\r\n                                        alt={bookDetails.tensach}\r\n                                        className=\"img-fluid rounded shadow-sm\"\r\n                                        style={{ maxHeight: '400px', objectFit: 'cover' }}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"col-md-8 p-4\">\r\n                                    <h1 className=\"fw-bold mb-4 text-primary\">\r\n                                        <i className=\"bi bi-book me-2\"></i>{bookDetails.tensach}\r\n                                    </h1>\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-md-6\">\r\n                                            <ul className=\"list-unstyled\">\r\n                                                <li className=\"mb-2\">\r\n                                                    <strong><i className=\"bi bi-upc-scan me-2\"></i>Mã sách:</strong>{' '}\r\n                                                    <span>{bookDetails.masach}</span>\r\n                                                </li>\r\n                                                <li className=\"mb-2\">\r\n                                                    <strong><i className=\"bi bi-person-fill me-2\"></i>Tác giả:</strong>{' '}\r\n                                                    <span>{bookDetails.tacgia}</span>\r\n                                                </li>\r\n                                                <li className=\"mb-2\">\r\n                                                    <strong><i className=\"bi bi-building me-2\"></i>Nhà xuất bản:</strong>{' '}\r\n                                                    <span>{bookDetails.nhaxuatban}</span>\r\n                                                </li>\r\n                                                <li className=\"mb-2\">\r\n                                                    <strong><i className=\"bi bi-tags-fill me-2\"></i>Phiên bản:</strong>{' '}\r\n                                                    <span>{bookDetails.phienban || 'N/A'}</span>\r\n                                                </li>\r\n\r\n                                            </ul>\r\n                                        </div>\r\n                                        <div className=\"col-md-6\">\r\n                                            <ul className=\"list-unstyled\">\r\n                                                <li className=\"mb-2\">\r\n                                                    <strong><i className=\"bi bi-file-earmark-text me-2\"></i>Số trang:</strong>{' '}\r\n                                                    <span>{bookDetails.pages || 'N/A'}</span>\r\n                                                </li>\r\n                                                <li className=\"mb-2\">\r\n                                                    <strong><i className=\"bi bi-currency-dollar me-2\"></i>Giá:</strong>{' '}\r\n                                                    <span>{bookDetails.price ? bookDetails.price.toLocaleString() + ' VND' : 'N/A'}</span>\r\n                                                </li>\r\n                                                <li className=\"mb-2\">\r\n                                                    <strong><i className=\"bi bi-clock-history me-2\"></i>Ngày cập nhật:</strong>{' '}\r\n                                                    <span>{formatDate(bookDetails.ngaycapnhat)}</span>\r\n                                                </li>\r\n                                                <li className=\"mb-2\">\r\n                                                    <strong><i className=\"bi bi-bookmark-fill me-2\"></i>Danh mục:</strong>{' '}\r\n                                                    <span>{bookDetails.tendanhmuc || 'N/A'}</span>\r\n                                                </li>\r\n                                                <li className=\"mb-2\">\r\n                                                    <strong><i className=\"bi bi-calendar-event me-2\"></i>Năm xuất bản:</strong>{' '}\r\n                                                    <span>{bookDetails.namxb}</span>\r\n                                                </li>\r\n                                            </ul>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"card-body border-top mt-4\">\r\n                                <h4 className=\"fw-semibold text-muted\">\r\n                                    <i className=\"bi bi-card-text me-2\"></i>Mô tả sách\r\n                                </h4>\r\n                                <p className=\"text-muted\">{bookDetails.mota || 'Không có mô tả'}</p>\r\n                            </div>\r\n                            <Box sx={{ display: 'flex', justifyContent: 'flex-end', p: 2 }}>\r\n                                <Button\r\n                                    variant=\"outlined\"\r\n                                    onClick={() => setShowDetailModal(false)}\r\n                                    sx={{\r\n                                        borderColor: '#3498DB',\r\n                                        color: '#3498DB',\r\n                                        '&:hover': {\r\n                                            borderColor: '#2C3E50',\r\n                                            color: '#2C3E50',\r\n                                        },\r\n                                        textTransform: 'none',\r\n                                    }}\r\n                                >\r\n                                    Đóng\r\n                                </Button>\r\n                            </Box>\r\n                        </div>\r\n                    )}\r\n                </Box>\r\n            </Modal>\r\n\r\n            {showModalQR && (\r\n                <div className=\"modal fade show d-block\" tabIndex=\"-1\" style={{ backgroundColor: 'rgba(0,0,0,0.5)' }}>\r\n                    <div className=\"modal-dialog modal-xl\">\r\n                        <div className=\"modal-content\">\r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\">Mã QR Theo Kệ</h5>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"btn-close\"\r\n                                    onClick={() => setShowModalQR(false)}\r\n                                ></button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                                {qrData.length > 0 ? (\r\n                                    <div className=\"row\">\r\n                                        {qrData.map((qr, index) => (\r\n                                            <div key={index} className=\"col-12 col-md-4 mb-4 text-center\">\r\n                                                <h6>{`Cơ sở: ${qr.coso} - Kệ: ${qr.soke}`}</h6>\r\n                                                <img\r\n                                                    src={qr.qrCodeBase64}\r\n                                                    alt={`QR for ${qr.coso}_${qr.soke}`}\r\n                                                    className=\"img-fluid\"\r\n                                                    style={{ maxWidth: '200px' }}\r\n                                                />\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                ) : (\r\n                                    <p className=\"text-center\">Không có mã QR nào để hiển thị.</p>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"btn btn-primary\"\r\n                                    onClick={handleSaveAllQRCodes}\r\n                                    disabled={qrData.length === 0}\r\n                                >\r\n                                    Lưu Tất Cả\r\n                                </button>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"btn btn-secondary\"\r\n                                    onClick={() => setShowModalQR(false)}\r\n                                >\r\n                                    Đóng\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <ModalAddLocation\r\n                showModalAddLocation={showModalAddLocation}\r\n                setShowModalAddLocation={setShowModalAddLocation}\r\n                onAddSuccess={handleAddSuccess}\r\n            />\r\n            <ModalEditLocation\r\n                locationData={selectedLocation}\r\n                showModalEditLocation={showModalEditLocation}\r\n                setShowModalEditLocation={setShowModalEditLocation}\r\n                onEditSuccess={handleEditSuccess}\r\n            />\r\n            <ModalDeleteLocation\r\n                showModalDeleteLocation={showModalDeleteLocation}\r\n                setShowModalDeleteLocation={setShowModalDeleteLocation}\r\n                mavitri={selectedMavitri}\r\n                onDeleteSuccess={handleDeleteSuccess}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ManagementLocation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}