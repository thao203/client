{"ast":null,"code":"import classNames from'classnames/bind';import styles from'./DetailCategory.module.scss';import Header from'../../Header/Header';import Footer from'../../Footer/Footer';import MenuLeft from'../../MenuLeft/MenuLeft';import MainBooks from'../ListBook/Mainbook';import{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import request from'../../../../../config/Connect';import{Box,Typography,Button}from'@mui/material';import ArrowBackIcon from'@mui/icons-material/ArrowBack';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const cx=classNames.bind(styles);function DetailCategory(){const[books,setBooks]=useState([]);const[categoryName,setCategoryName]=useState('');const{madanhmuc}=useParams();// Lấy madanhmuc từ URL\nconst navigate=useNavigate();useEffect(()=>{document.title=\"Sách theo danh mục\";const fetchBooksByCategory=async()=>{console.log('madanhmuc từ URL:',madanhmuc);if(!madanhmuc){setBooks([]);setCategoryName('Không có mã danh mục');return;}try{const res=await request.get('/api/getBooksByCategory',{params:{madanhmuc:madanhmuc}});setBooks(res.data.books);const categoryRes=await request.get('/api/getAllCategories');const category=categoryRes.data.data.find(cat=>cat.madanhmuc===madanhmuc);setCategoryName(category?category.tendanhmuc:madanhmuc);console.log('Danh sách sách:',res.data.books);}catch(error){var _error$response,_error$response2;console.error('Lỗi khi lấy sách theo danh mục:',error);if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===404){setBooks([]);const categoryRes=await request.get('/api/getAllCategories');const category=categoryRes.data.data.find(cat=>cat.madanhmuc===madanhmuc);setCategoryName(category?category.tendanhmuc:madanhmuc);}else if(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===400){setBooks([]);setCategoryName(madanhmuc||'Không có mã danh mục');}}};fetchBooksByCategory();},[madanhmuc]);const handleBack=()=>{navigate('/categories');};return/*#__PURE__*/_jsxs(\"div\",{className:cx('wrapper'),children:[/*#__PURE__*/_jsx(\"header\",{className:cx('header'),children:/*#__PURE__*/_jsx(Header,{})}),/*#__PURE__*/_jsxs(\"div\",{className:cx('main-container'),children:[/*#__PURE__*/_jsx(\"aside\",{className:cx('menu-left'),children:/*#__PURE__*/_jsx(MenuLeft,{})}),/*#__PURE__*/_jsx(\"main\",{className:cx('content'),children:/*#__PURE__*/_jsxs(Box,{sx:{padding:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'space-between',// Đẩy nút sang trái, tiêu đề ra giữa\nmb:3,// Khoảng cách dưới\nposition:'relative'},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(ArrowBackIcon,{}),onClick:handleBack,sx:{borderColor:'#3498DB',color:'#3498DB','&:hover':{borderColor:'#2C3E50',color:'#2C3E50'},textTransform:'none',zIndex:10// Đảm bảo nút không bị đè\n},children:\"Quay l\\u1EA1i\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",sx:{fontWeight:'bold',color:'#2C3E50',textAlign:'center',textTransform:'uppercase',letterSpacing:1.5,borderBottom:'3px solid #3498DB',paddingBottom:'5px',flexGrow:1// Để tiêu đề chiếm không gian còn lại\n},children:[\"\\uD83D\\uDCDA \",categoryName?`Danh mục: ${categoryName}`:'Danh mục sách']}),/*#__PURE__*/_jsx(Box,{sx:{width:'80px'}}),\" \"]}),books.length>0?/*#__PURE__*/_jsx(MainBooks,{dataBooks:books,isMenuOpen:true}):/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{textAlign:'center',mt:2},children:\"Kh\\xF4ng c\\xF3 s\\xE1ch n\\xE0o trong danh m\\u1EE5c n\\xE0y.\"})]})})]}),/*#__PURE__*/_jsx(\"footer\",{className:cx('footer'),children:/*#__PURE__*/_jsx(Footer,{})})]});}export default DetailCategory;","map":{"version":3,"names":["classNames","styles","Header","Footer","MenuLeft","MainBooks","useEffect","useState","useParams","useNavigate","request","Box","Typography","Button","ArrowBackIcon","jsx","_jsx","jsxs","_jsxs","cx","bind","DetailCategory","books","setBooks","categoryName","setCategoryName","madanhmuc","navigate","document","title","fetchBooksByCategory","console","log","res","get","params","data","categoryRes","category","find","cat","tendanhmuc","error","_error$response","_error$response2","response","status","handleBack","className","children","sx","padding","display","alignItems","justifyContent","mb","position","variant","startIcon","onClick","borderColor","color","textTransform","zIndex","fontWeight","textAlign","letterSpacing","borderBottom","paddingBottom","flexGrow","width","length","dataBooks","isMenuOpen","mt"],"sources":["E:/Documents/Hoc_Tap/LATN/client/src/Page/HomePage/Layouts/Main/Categories/DetaiCategory.js"],"sourcesContent":["import classNames from 'classnames/bind';\r\nimport styles from './DetailCategory.module.scss';\r\nimport Header from '../../Header/Header';\r\nimport Footer from '../../Footer/Footer';\r\nimport MenuLeft from '../../MenuLeft/MenuLeft';\r\nimport MainBooks from '../ListBook/Mainbook';\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport request from '../../../../../config/Connect';\r\nimport { Box, Typography, Button } from '@mui/material';\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction DetailCategory() {\r\n    const [books, setBooks] = useState([]);\r\n    const [categoryName, setCategoryName] = useState('');\r\n    const { madanhmuc } = useParams(); // Lấy madanhmuc từ URL\r\n    const navigate = useNavigate();\r\n\r\n\r\n    useEffect(() => {\r\n        document.title = \"Sách theo danh mục\";\r\n        const fetchBooksByCategory = async () => {\r\n            console.log('madanhmuc từ URL:', madanhmuc);\r\n            if (!madanhmuc) {\r\n                setBooks([]);\r\n                setCategoryName('Không có mã danh mục');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const res = await request.get('/api/getBooksByCategory', {\r\n                    params: { madanhmuc: madanhmuc },\r\n                });\r\n                setBooks(res.data.books);\r\n\r\n                const categoryRes = await request.get('/api/getAllCategories');\r\n                const category = categoryRes.data.data.find(\r\n                    (cat) => cat.madanhmuc === madanhmuc\r\n                );\r\n                setCategoryName(category ? category.tendanhmuc : madanhmuc);\r\n                console.log('Danh sách sách:', res.data.books);\r\n            } catch (error) {\r\n                console.error('Lỗi khi lấy sách theo danh mục:', error);\r\n                if (error.response?.status === 404) {\r\n                    setBooks([]);\r\n                    const categoryRes = await request.get('/api/getAllCategories');\r\n                    const category = categoryRes.data.data.find(\r\n                        (cat) => cat.madanhmuc === madanhmuc\r\n                    );\r\n                    setCategoryName(category ? category.tendanhmuc : madanhmuc);\r\n                } else if (error.response?.status === 400) {\r\n                    setBooks([]);\r\n                    setCategoryName(madanhmuc || 'Không có mã danh mục');\r\n                }\r\n            }\r\n        };\r\n\r\n        fetchBooksByCategory();\r\n    }, [madanhmuc]);\r\n\r\n    const handleBack = () => {\r\n        navigate('/categories');\r\n    };\r\n\r\n    return (\r\n        <div className={cx('wrapper')}>\r\n            <header className={cx('header')}>\r\n                <Header />\r\n            </header>\r\n\r\n            <div className={cx('main-container')}>\r\n                <aside className={cx('menu-left')}>\r\n                    <MenuLeft />\r\n                </aside>\r\n\r\n                <main className={cx('content')}>\r\n                    <Box sx={{ padding: 2 }}>\r\n                        {/* Container cho nút và tiêu đề */}\r\n                        <Box\r\n                            sx={{\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'space-between', // Đẩy nút sang trái, tiêu đề ra giữa\r\n                                mb: 3, // Khoảng cách dưới\r\n                                position: 'relative',\r\n                            }}\r\n                        >\r\n                            {/* Nút Quay lại */}\r\n                            <Button\r\n                                variant=\"outlined\"\r\n                                startIcon={<ArrowBackIcon />}\r\n                                onClick={handleBack}\r\n                                sx={{\r\n                                    borderColor: '#3498DB',\r\n                                    color: '#3498DB',\r\n                                    '&:hover': {\r\n                                        borderColor: '#2C3E50',\r\n                                        color: '#2C3E50',\r\n                                    },\r\n                                    textTransform: 'none',\r\n                                    zIndex: 10, // Đảm bảo nút không bị đè\r\n                                }}\r\n                            >\r\n                                Quay lại\r\n                            </Button>\r\n\r\n                            {/* Tiêu đề */}\r\n                            <Typography\r\n                                variant=\"h4\"\r\n                                sx={{\r\n                                    fontWeight: 'bold',\r\n                                    color: '#2C3E50',\r\n                                    textAlign: 'center',\r\n                                    textTransform: 'uppercase',\r\n                                    letterSpacing: 1.5,\r\n                                    borderBottom: '3px solid #3498DB',\r\n                                    paddingBottom: '5px',\r\n                                    flexGrow: 1, // Để tiêu đề chiếm không gian còn lại\r\n                                }}\r\n                            >\r\n                                📚 {categoryName ? `Danh mục: ${categoryName}` : 'Danh mục sách'}\r\n                            </Typography>\r\n\r\n                            {/* Placeholder để cân bằng layout nếu cần */}\r\n                            <Box sx={{ width: '80px' }} /> {/* Điều chỉnh độ rộng nếu cần */}\r\n                        </Box>\r\n\r\n                        {/* Nội dung sách */}\r\n                        {books.length > 0 ? (\r\n                            <MainBooks dataBooks={books} isMenuOpen={true} />\r\n                        ) : (\r\n                            <Typography variant=\"body1\" sx={{ textAlign: 'center', mt: 2 }}>\r\n                                Không có sách nào trong danh mục này.\r\n                            </Typography>\r\n                        )}\r\n                    </Box>\r\n                </main>\r\n            </div>\r\n\r\n            <footer className={cx('footer')}>\r\n                <Footer />\r\n            </footer>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DetailCategory;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}