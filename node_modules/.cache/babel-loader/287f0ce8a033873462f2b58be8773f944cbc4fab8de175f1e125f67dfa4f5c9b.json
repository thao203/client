{"ast":null,"code":"import classNames from'classnames/bind';import styles from'./listbook.module.scss';import Header from'../../Header/Header';import{useEffect,useState}from'react';import useDebounce from'../../../../../customHook/useDebounce';import request from'../../../../../config/Connect';import MenuLeft from'../../MenuLeft/MenuLeft';import Footer from'../../Footer/Footer';import MainBooks from'./Mainbook';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const cx=classNames.bind(styles);function ListBook(){const[dataBooks,setDataBooks]=useState([]);const[searchValue,setSearchValue]=useState('');const debounce=useDebounce(searchValue,500);const[sortOption,setSortOption]=useState('');useEffect(()=>{document.title=\"Danh s치ch s치ch\";request.get('/api/GetBooks').then(res=>{setDataBooks(res.data);}).catch(error=>console.error(error));},[]);useEffect(()=>{const fetchSearchResults=async()=>{try{if(searchValue.trim()===''){const res=await request.get('/api/GetBooks');setDataBooks(res.data);return;}const res=await request.get('/api/SearchProduct',{params:{tensach:debounce}});setDataBooks(res.data);}catch(error){var _error$response,_error$response2;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===400||((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===404){setDataBooks([]);}else{setDataBooks([]);}}};fetchSearchResults();},[debounce]);return/*#__PURE__*/_jsxs(\"div\",{className:cx('wrapper'),children:[/*#__PURE__*/_jsx(\"header\",{className:cx('header'),children:/*#__PURE__*/_jsx(Header,{setSearchValue:setSearchValue,setSortOption:setSortOption})}),/*#__PURE__*/_jsxs(\"div\",{className:cx('main-container'),children:[/*#__PURE__*/_jsx(\"aside\",{className:cx('menu-left'),children:/*#__PURE__*/_jsx(MenuLeft,{})}),/*#__PURE__*/_jsx(\"main\",{className:cx('content'),children:/*#__PURE__*/_jsx(MainBooks,{dataBooks:dataBooks,searchQuery:searchValue,sortOption:sortOption,isMenuOpen:false})})]}),/*#__PURE__*/_jsx(\"footer\",{className:cx('footer'),children:/*#__PURE__*/_jsx(Footer,{})})]});}export default ListBook;","map":{"version":3,"names":["classNames","styles","Header","useEffect","useState","useDebounce","request","MenuLeft","Footer","MainBooks","jsx","_jsx","jsxs","_jsxs","cx","bind","ListBook","dataBooks","setDataBooks","searchValue","setSearchValue","debounce","sortOption","setSortOption","document","title","get","then","res","data","catch","error","console","fetchSearchResults","trim","params","tensach","_error$response","_error$response2","response","status","className","children","searchQuery","isMenuOpen"],"sources":["E:/Documents/Hoc_Tap/LATN/client/src/Page/HomePage/Layouts/Main/ListBook/listbook.js"],"sourcesContent":["import classNames from 'classnames/bind';\r\nimport styles from './listbook.module.scss';\r\nimport Header from '../../Header/Header';\r\nimport { useEffect, useState } from 'react';\r\nimport useDebounce from '../../../../../customHook/useDebounce';\r\nimport request from '../../../../../config/Connect';\r\nimport MenuLeft from '../../MenuLeft/MenuLeft';\r\nimport Footer from '../../Footer/Footer';\r\nimport MainBooks from './Mainbook';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction ListBook() {\r\n    const [dataBooks, setDataBooks] = useState([]);\r\n    const [searchValue, setSearchValue] = useState('');\r\n    const debounce = useDebounce(searchValue, 500);\r\n    const [sortOption, setSortOption] = useState('');\r\n\r\n    useEffect(() => {\r\n        document.title = \"Danh s치ch s치ch\";\r\n        request\r\n            .get('/api/GetBooks')\r\n            .then((res) => {\r\n                setDataBooks(res.data);\r\n            })\r\n            .catch((error) => console.error(error));\r\n    }, []);\r\n    useEffect(() => {\r\n        const fetchSearchResults = async () => {\r\n            try {\r\n                if (searchValue.trim() === '') {\r\n                    const res = await request.get('/api/GetBooks');\r\n                    setDataBooks(res.data);\r\n                    return;\r\n                }\r\n\r\n                const res = await request.get('/api/SearchProduct', {\r\n                    params: { tensach: debounce },\r\n                });\r\n\r\n                setDataBooks(res.data);\r\n            } catch (error) {\r\n                if (error.response?.status === 400 || error.response?.status === 404) {\r\n                    setDataBooks([]);\r\n                } else {\r\n                    setDataBooks([]);\r\n                }\r\n            }\r\n        };\r\n\r\n        fetchSearchResults();\r\n    }, [debounce]);\r\n\r\n    return (\r\n        <div className={cx('wrapper')}>\r\n            <header className={cx('header')}>\r\n                <Header setSearchValue={setSearchValue} setSortOption={setSortOption} />\r\n            </header>\r\n\r\n            <div className={cx('main-container')}>\r\n                <aside className={cx('menu-left')}>\r\n                    <MenuLeft />\r\n                </aside>\r\n\r\n                <main className={cx('content')}>\r\n                    <MainBooks\r\n                        dataBooks={dataBooks}\r\n                        searchQuery={searchValue}\r\n                        sortOption={sortOption}\r\n                        isMenuOpen={false}\r\n                    />\r\n                </main>\r\n            </div>\r\n\r\n            <footer className={cx('footer')}>\r\n                <Footer />\r\n            </footer>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ListBook;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}