{"ast":null,"code":"import classNames from'classnames/bind';import styles from'./Header.module.scss';import{Link}from'react-router-dom';import{useEffect,useState}from'react';import{jwtDecode}from'jwt-decode';import request from'../../../../config/Connect';import AccountCircleIcon from'@mui/icons-material/AccountCircle';import ShoppingCartIcon from'@mui/icons-material/ShoppingCart';import Logo from'../../../../asset/img/logo.jpg';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const cx=classNames.bind(styles);function Header(_ref){let{setSearchValue,setSortOption}=_ref;const[show,setShow]=useState(false);const[checkAdmin,setCheckAdmin]=useState(false);const handleShow=()=>{setShow(!show);};const getToken=()=>{const tokenCookie=document.cookie.split('; ').find(row=>row.startsWith('token='));return tokenCookie?tokenCookie.split('=')[1]:null;};useEffect(()=>{const token=getToken();if(token){try{const decoded=jwtDecode(token);setCheckAdmin(decoded.isAdmin===true);}catch(error){console.error('Token không hợp lệ:',error);setCheckAdmin(false);}}},[]);const handleLogout=()=>{request.get('/api/logout').then(res=>console.log(res));};const handleSortChange=e=>{setSortOption(e.target.value);};return/*#__PURE__*/_jsx(\"div\",{className:cx('wrapper'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center mb-2\",children:[/*#__PURE__*/_jsx(Link,{to:\"/homepage\",children:/*#__PURE__*/_jsx(\"img\",{style:{width:'50px'},src:Logo,alt:\"Logo UNETI\"})}),/*#__PURE__*/_jsxs(\"div\",{className:cx('title'),children:[/*#__PURE__*/_jsx(\"h6\",{children:\"TRUNG T\\xC2M TH\\u01AF VI\\u1EC6N\"}),/*#__PURE__*/_jsx(\"span\",{children:\"TH\\u01AF VI\\u1EC6N \\u0110I\\u1EC6N T\\u1EEC\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center ms-auto\",style:{gap:'25px'},children:[(window.location.pathname==='/books'||window.location.pathname==='/categories')&&/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",style:{gap:'10px'},children:[/*#__PURE__*/_jsx(\"form\",{className:\"d-flex\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control me-2\",type:\"search\",placeholder:\"T\\xECm Ki\\u1EBFm\",\"aria-label\":\"Search\",onChange:e=>setSearchValue(e.target.value)})}),window.location.pathname==='/books'&&/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",style:{width:'150px'},onChange:handleSortChange,defaultValue:\"\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"S\\u1EAFp x\\u1EBFp theo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"newest\",children:\"M\\u1EDBi nh\\u1EA5t\"}),/*#__PURE__*/_jsx(\"option\",{value:\"oldest\",children:\"C\\u0169 nh\\u1EA5t\"}),/*#__PURE__*/_jsx(\"option\",{value:\"az\",children:\"A-Z\"}),/*#__PURE__*/_jsx(\"option\",{value:\"za\",children:\"Z-A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mostBorrowed\",children:\"\\u0110\\u01B0\\u1EE3c m\\u01B0\\u1EE3n nhi\\u1EC1u nh\\u1EA5t\"})]})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"navbar-nav d-flex flex-row align-items-center mb-0\",style:{gap:'15px'},children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/cart\",className:\"nav-link p-0\",children:/*#__PURE__*/_jsx(ShoppingCartIcon,{style:{fontSize:'30px',verticalAlign:'middle'}})})}),/*#__PURE__*/_jsxs(\"li\",{className:\"nav-item dropdown\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"nav-link dropdown-toggle p-0\",href:\"#/\",id:\"navbarDropdown\",role:\"button\",\"data-bs-toggle\":\"dropdown\",\"aria-expanded\":\"false\",children:/*#__PURE__*/_jsx(AccountCircleIcon,{style:{fontSize:'30px',verticalAlign:'middle'}})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"dropdown-menu\",\"aria-labelledby\":\"navbarDropdown\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/info\",className:\"dropdown-item\",children:\"Th\\xF4ng Tin T\\xE0i Kho\\u1EA3n\"})}),checkAdmin&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"dropdown-item\",children:\"Trang Qu\\u1EA3n Tr\\u1ECB Admin\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{className:\"dropdown-item\",to:\"/changepass\",children:\"\\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"hr\",{className:\"dropdown-divider\"})}),/*#__PURE__*/_jsx(\"li\",{onClick:handleLogout,children:/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",href:\"/\",children:\"\\u0110\\u0103ng Xu\\u1EA5t\"})})]})]})]})]})]})});}export default Header;","map":{"version":3,"names":["classNames","styles","Link","useEffect","useState","jwtDecode","request","AccountCircleIcon","ShoppingCartIcon","Logo","jsx","_jsx","jsxs","_jsxs","cx","bind","Header","_ref","setSearchValue","setSortOption","show","setShow","checkAdmin","setCheckAdmin","handleShow","getToken","tokenCookie","document","cookie","split","find","row","startsWith","token","decoded","isAdmin","error","console","handleLogout","get","then","res","log","handleSortChange","e","target","value","className","children","to","style","width","src","alt","gap","window","location","pathname","type","placeholder","onChange","defaultValue","disabled","fontSize","verticalAlign","href","id","role","onClick"],"sources":["E:/Documents/Hoc_Tap/LATN/client/src/Page/HomePage/Layouts/Header/Header.js"],"sourcesContent":["import classNames from 'classnames/bind';\r\nimport styles from './Header.module.scss';\r\nimport { Link } from 'react-router-dom';\r\nimport { useEffect, useState } from 'react';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport request from '../../../../config/Connect';\r\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle';\r\nimport ShoppingCartIcon from '@mui/icons-material/ShoppingCart';\r\nimport Logo from '../../../../asset/img/logo.jpg';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction Header({ setSearchValue, setSortOption }) {\r\n    const [show, setShow] = useState(false);\r\n    const [checkAdmin, setCheckAdmin] = useState(false);\r\n\r\n    const handleShow = () => {\r\n        setShow(!show);\r\n    };\r\n\r\n    const getToken = () => {\r\n        const tokenCookie = document.cookie.split('; ').find(row => row.startsWith('token='));\r\n        return tokenCookie ? tokenCookie.split('=')[1] : null;\r\n    };\r\n\r\n    useEffect(() => {\r\n        const token = getToken();\r\n        if (token) {\r\n            try {\r\n                const decoded = jwtDecode(token);\r\n                setCheckAdmin(decoded.isAdmin === true);\r\n            } catch (error) {\r\n                console.error('Token không hợp lệ:', error);\r\n                setCheckAdmin(false);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    const handleLogout = () => {\r\n        request.get('/api/logout').then((res) => console.log(res));\r\n    };\r\n\r\n    const handleSortChange = (e) => {\r\n        setSortOption(e.target.value);\r\n    };\r\n\r\n    return (\r\n        <div className={cx('wrapper')}>\r\n            <div className=\"d-flex align-items-center mb-2\">\r\n                <Link to=\"/homepage\">\r\n                    <img style={{ width: '50px' }} src={Logo} alt=\"Logo UNETI\" />\r\n                </Link>\r\n                <div className={cx('title')}>\r\n                    <h6>TRUNG TÂM THƯ VIỆN</h6>\r\n                    <span>THƯ VIỆN ĐIỆN TỬ</span>\r\n                </div>\r\n\r\n                <div className=\"d-flex align-items-center ms-auto\" style={{ gap: '25px' }}>\r\n                    {(window.location.pathname === '/books' || window.location.pathname === '/categories') && (\r\n                        <div className=\"d-flex align-items-center\" style={{ gap: '10px' }}>\r\n                            <form className=\"d-flex\">\r\n                                <input\r\n                                    className=\"form-control me-2\"\r\n                                    type=\"search\"\r\n                                    placeholder=\"Tìm Kiếm\"\r\n                                    aria-label=\"Search\"\r\n                                    onChange={(e) => setSearchValue(e.target.value)}\r\n                                />\r\n                            </form>\r\n                            {window.location.pathname === '/books' && (\r\n                                <select\r\n                                    className=\"form-select\"\r\n                                    style={{ width: '150px' }}\r\n                                    onChange={handleSortChange}\r\n                                    defaultValue=\"\"\r\n                                >\r\n                                    <option value=\"\" disabled>\r\n                                        Sắp xếp theo\r\n                                    </option>\r\n                                    <option value=\"newest\">Mới nhất</option>\r\n                                    <option value=\"oldest\">Cũ nhất</option>\r\n                                    <option value=\"az\">A-Z</option>\r\n                                    <option value=\"za\">Z-A</option>\r\n                                    <option value=\"mostBorrowed\">Được mượn nhiều nhất</option>\r\n                                </select>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    <ul className=\"navbar-nav d-flex flex-row align-items-center mb-0\" style={{ gap: '15px' }}>\r\n                        {/* Icon giỏ hàng */}\r\n                        <li className=\"nav-item\">\r\n                            <Link to=\"/cart\" className=\"nav-link p-0\">\r\n                                <ShoppingCartIcon style={{ fontSize: '30px', verticalAlign: 'middle' }} />\r\n                            </Link>\r\n                        </li>\r\n                        {/* Icon avatar */}\r\n                        <li className=\"nav-item dropdown\">\r\n                            <a\r\n                                className=\"nav-link dropdown-toggle p-0\"\r\n                                href=\"#/\"\r\n                                id=\"navbarDropdown\"\r\n                                role=\"button\"\r\n                                data-bs-toggle=\"dropdown\"\r\n                                aria-expanded=\"false\"\r\n                            >\r\n                                <AccountCircleIcon style={{ fontSize: '30px', verticalAlign: 'middle' }} />\r\n                            </a>\r\n                            <ul className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                                <li>\r\n                                    <Link to=\"/info\" className=\"dropdown-item\">\r\n                                        Thông Tin Tài Khoản\r\n                                    </Link>\r\n                                </li>\r\n                                {checkAdmin && (\r\n                                    <li>\r\n                                        <Link to=\"/admin\" className=\"dropdown-item\">\r\n                                            Trang Quản Trị Admin\r\n                                        </Link>\r\n                                    </li>\r\n                                )}\r\n                                <li>\r\n                                    <Link className=\"dropdown-item\" to=\"/changepass\">\r\n                                        Đổi mật khẩu\r\n                                    </Link>\r\n                                </li>\r\n                                <li>\r\n                                    <hr className=\"dropdown-divider\" />\r\n                                </li>\r\n                                <li onClick={handleLogout}>\r\n                                    <a className=\"dropdown-item\" href=\"/\">\r\n                                        Đăng Xuất\r\n                                    </a>\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Header;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}