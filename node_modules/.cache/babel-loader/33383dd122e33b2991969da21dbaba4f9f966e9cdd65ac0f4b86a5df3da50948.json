{"ast":null,"code":"import Button from'react-bootstrap/Button';import Modal from'react-bootstrap/Modal';import Form from'react-bootstrap/Form';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import request from'../../config/Connect';// Đảm bảo import đúng\nimport{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function ModalEditLocation(_ref){let{showModalEditLocation,setShowModalEditLocation,locationData,onEditSuccess}=_ref;const[mavitri,setMavitri]=useState('');const[coso,setCoso]=useState('');const[soke,setSoke]=useState('');useEffect(()=>{if(locationData){setMavitri(locationData.mavitri||'');setCoso(locationData.coso||'');setSoke(locationData.soke||'');}},[locationData]);const handleClose=()=>setShowModalEditLocation(false);const toastOptions={position:\"top-right\",autoClose:1000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined};const handleEditLocation=async()=>{try{const dataToSend={mavitri,coso,soke};// Gửi cả mavitri trong body\nconst url='/api/updateLocation';// Sử dụng endpoint cố định\nconst res=await request.put(url,dataToSend);toast.success(res.data.message||'Cập nhật vị trí thành công!',{...toastOptions,onClose:()=>{handleClose();onEditSuccess();}});}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Có lỗi xảy ra khi cập nhật!',toastOptions);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Modal,{show:showModalEditLocation,onHide:handleClose,size:\"lg\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Modal.Title,{style:{fontSize:'1.5rem',fontWeight:'bold'},children:\"Ch\\u1EC9nh S\\u1EEDa V\\u1ECB Tr\\xED\"})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"p-4\",children:/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(Row,{className:\"g-3\",children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formMavitri\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"M\\xE3 V\\u1ECB Tr\\xED\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:mavitri,disabled:true,className:\"shadow-sm\"})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formCoso\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"C\\u01A1 S\\u1EDF\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Nh\\u1EADp c\\u01A1 s\\u1EDF\",value:coso,onChange:e=>setCoso(e.target.value),className:\"shadow-sm\"})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formSoke\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"S\\u1ED1 K\\u1EC7\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Nh\\u1EADp s\\u1ED1 k\\u1EC7\",value:soke,onChange:e=>setSoke(e.target.value),className:\"shadow-sm\"})]})})]})})}),/*#__PURE__*/_jsxs(Modal.Footer,{className:\"justify-content-between\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,className:\"px-4\",children:\"\\u0110\\xF3ng\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleEditLocation,className:\"px-4\",children:\"L\\u01B0u L\\u1EA1i\"})]})]})});}export default ModalEditLocation;","map":{"version":3,"names":["Button","Modal","Form","Row","Col","request","ToastContainer","toast","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ModalEditLocation","_ref","showModalEditLocation","setShowModalEditLocation","locationData","onEditSuccess","mavitri","setMavitri","coso","setCoso","soke","setSoke","handleClose","toastOptions","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","handleEditLocation","dataToSend","url","res","put","success","data","message","onClose","error","_error$response","_error$response$data","response","children","show","onHide","size","Header","closeButton","className","Title","style","fontSize","fontWeight","Body","md","Group","controlId","Label","Control","type","value","disabled","placeholder","onChange","e","target","Footer","variant","onClick"],"sources":["E:/Documents/Hoc_Tap/LATN/client/src/Modal/Location/ModalEditLocation.js"],"sourcesContent":["import Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport request from '../../config/Connect'; // Đảm bảo import đúng\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { useState, useEffect } from 'react';\r\n\r\nfunction ModalEditLocation({ showModalEditLocation, setShowModalEditLocation, locationData, onEditSuccess }) {\r\n    const [mavitri, setMavitri] = useState('');\r\n    const [coso, setCoso] = useState('');\r\n    const [soke, setSoke] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (locationData) {\r\n            setMavitri(locationData.mavitri || '');\r\n            setCoso(locationData.coso || '');\r\n            setSoke(locationData.soke || '');\r\n        }\r\n    }, [locationData]);\r\n\r\n    const handleClose = () => setShowModalEditLocation(false);\r\n\r\n    const toastOptions = {\r\n        position: \"top-right\",\r\n        autoClose: 1000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n    };\r\n\r\n    const handleEditLocation = async () => {\r\n        try {\r\n            const dataToSend = { mavitri, coso, soke }; // Gửi cả mavitri trong body\r\n            const url = '/api/updateLocation'; // Sử dụng endpoint cố định\r\n            const res = await request.put(url, dataToSend);\r\n\r\n            toast.success(res.data.message || 'Cập nhật vị trí thành công!', {\r\n                ...toastOptions,\r\n                onClose: () => {\r\n                    handleClose();\r\n                    onEditSuccess();\r\n                },\r\n            });\r\n        } catch (error) {\r\n            toast.error(error.response?.data?.message || 'Có lỗi xảy ra khi cập nhật!', toastOptions);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Modal show={showModalEditLocation} onHide={handleClose} size=\"lg\">\r\n                <Modal.Header closeButton className=\"justify-content-center\">\r\n                    <Modal.Title style={{ fontSize: '1.5rem', fontWeight: 'bold' }}>\r\n                        Chỉnh Sửa Vị Trí\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body className=\"p-4\">\r\n                    <Form>\r\n                        <Row className=\"g-3\">\r\n                            <Col md={4}>\r\n                                <Form.Group controlId=\"formMavitri\">\r\n                                    <Form.Label>Mã Vị Trí</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        value={mavitri}\r\n                                        disabled\r\n                                        className=\"shadow-sm\"\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                            <Col md={4}>\r\n                                <Form.Group controlId=\"formCoso\">\r\n                                    <Form.Label>Cơ Sở</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        placeholder=\"Nhập cơ sở\"\r\n                                        value={coso}\r\n                                        onChange={(e) => setCoso(e.target.value)}\r\n                                        className=\"shadow-sm\"\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                            <Col md={4}>\r\n                                <Form.Group controlId=\"formSoke\">\r\n                                    <Form.Label>Số Kệ</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        placeholder=\"Nhập số kệ\"\r\n                                        value={soke}\r\n                                        onChange={(e) => setSoke(e.target.value)}\r\n                                        className=\"shadow-sm\"\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                        </Row>\r\n                    </Form>\r\n                </Modal.Body>\r\n                <Modal.Footer className=\"justify-content-between\">\r\n                    <Button variant=\"secondary\" onClick={handleClose} className=\"px-4\">\r\n                        Đóng\r\n                    </Button>\r\n                    <Button variant=\"primary\" onClick={handleEditLocation} className=\"px-4\">\r\n                        Lưu Lại\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ModalEditLocation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}